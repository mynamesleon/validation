/**
 * validation
 * Leon Slater
 * http://mynamesleon.com
 * github.com/mynamesleon/validation
 * @license: MIT
 */
!function(e,t){"use strict";"function"==typeof e.define&&e.define.amd?e.define(["jQuery"],function(a){return e.validation=t(e,a)}):e.validation=t(e,e.jQuery)}(this,function(e,t){"use strict";var a={},r={required:{validate:function(e){var r=t(this);return r.is("select")?e&&e.length>0:a.element.isCheckable(r)?r.filter(":checked").length>0:"string"!=typeof e?!!e:e.length>0}},alpha:{regex:/^[a-zA-Z\s]+$/,validate:function(e){return r.alpha.regex.test(e)}},alphanumeric:{regex:/^[a-z0-9]+$/i,validate:function(e){return r.alphanumeric.regex.test(e)}},email:{regex:new RegExp(["^[a-zA-Z0-9.!#$%&'*+/=?\\^_`{|}~\\-]+@[a-zA-Z0-9]","(?:[a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?","(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?)*$"].join("")),validate:function(e){return r.email.regex.test(e)}},match:{validate:function(e,t){return e===t}},min:{validate:function(e,t){return parseFloat(e)>=parseFloat(t)}},max:{validate:function(e,t){return parseFloat(e)<=parseFloat(t)}},range:{separators:/[\,\_\|\:]/g,validate:function(e,t){var a=t.replace(r.range.separators," ").split(" "),i=parseFloat(e);return i>=parseFloat(a[0])&&i<=parseFloat(a[1])}},minlength:{validate:function(e,r){var i=(a.element.isCheckable(t(this))?a.element.getByAttribute(t(this),"name").filter(":checked"):e).length;return i>=parseFloat(r)}},maxlength:{validate:function(e,r){var i=(a.element.isCheckable(t(this))?a.element.getByAttribute(t(this),"name").filter(":checked"):e).length;return i<=parseFloat(r)}},rangelength:{separators:/[\,\-\_\|\:]/g,validate:function(e,i){var n=i.replace(r.rangelength.separators," ").split(" "),l=(a.element.isCheckable(t(this))?a.element.getByAttribute(t(this),"name").filter(":checked"):e).length;return l>=parseFloat(n[0])&&l<=parseFloat(n[1])}},minwords:{validate:function(e,a){return t.trim(e).split(/\s+/).length>=parseFloat(a)}},maxwords:{validate:function(e,a){return t.trim(e).split(/\s+/).length<=parseFloat(a)}},rangewords:{separators:/[\,\-\_\|\:]/g,validate:function(e,a){var i=a.replace(r.rangewords.separators," ").split(" "),n=t.trim(e).split(/\s+/).length;return n>=parseFloat(i[0])&&n<=parseFloat(i[1])}},number:{validate:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},integer:{regex:/^-?\d+$/,validate:function(e){return r.integer.regex.test(e)}},digits:{regex:/^\d+$/,validate:function(e){return r.digits.regex.test(e)}},checked:{validate:function(e){return a.element.isCheckable(t(this))?a.element.getByAttribute(t(this),"name").filter(":checked").length>0:"-1"!==e}},unchecked:{validate:function(e){return a.element.isCheckable(t(this))?0===a.element.getByAttribute(t(this),"name").filter(":checked").length:"-1"===e}},confirm:{validate:function(e,r){var i,n,l,d,o,s=[];if("string"==typeof r&&"$"===r.charAt(0)&&")"===r.charAt(r.length-1)){for(s=t.trim((r+" ").split("()").join("(empty)").replace(") ","")).split(/[\)\(]/g),n=s.length,o=0;o<n;o+=2)if(l=s[o],d=s[o+1],"$"===l&&"undefined"==typeof i)i=t("this"===d?this:"empty"===d?void 0:d.substr(1,d.length-2));else{if("."!==l.slice(0,1))return a.error(["confirm rule: Incorrectly formatted jQuery selector function \n","Only basic methods (e.g. .parent(), .find(), etc.) are permitted,","and only a single string argument will be accepted for them"].join("")),!1;if(l=l.replace(".",""),i="empty"===d?i[l]():i[l](d.substr(1,d.length-2)),"object"==typeof i&&!i.length)return a.error(["confirm rule: Failed to parse your selector \n","The element you were after could not be found"].join("")),!1}return e===("object"==typeof i?i.val():i)}return e===t(r).val()}},regex:{toStringProto:Object.prototype.toString,validate:function(e,t){var a,i;return"string"==typeof t?("/"===t.charAt(0)&&(i=t.split("/"),a=i.pop(),i.shift(),t=i.join("/")),new RegExp(t,a).test(e)):"[object RegExp]"===r.regex.toStringProto.call(t)?t.test(e):void 0}},date:{regex:/Invalid|NaN/,validate:function(e){return!r.date.regex.test(new Date(e).toString())}},url:{regex:new RegExp(["^","(?:(?:https?|ftp)://)","(?:\\S+(?::\\S*)?@)?","(?:","(?!(?:10|127)(?:\\.\\d{1,3}){3})","(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})","(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})","(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])","(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}","(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))","|","(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)","(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*","(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))","\\.?",")","(?::\\d{2,5})?","(?:[/?#]\\S*)?","$"].join(""),"i"),validate:function(e){return r.url.regex.test(e)}},ipaddress:{ipv4:new RegExp(["^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}","(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)","(/([0-9]|[1-2][0-9]|3[0-2]))?","$"].join("")),ipv6:new RegExp(["^\\s*","(","(([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|","(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|","(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|","(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|","(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|","(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|","(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|","(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))",")","(%.+)?\\s*(/(\\d|\\d\\d|1[0-1]\\d|12[0-8]))?$"].join("")),validate:function(e){return r.ipaddress.ipv4.test(e)||r.ipaddress.ipv6.test(e)}},creditcard:{notAllowed:new RegExp("[^0-9 \\-]+"),nonDigits:/\D/g,validate:function(e){if(r.creditcard.notAllowed.test(e))return!1;var t,a,i=0,n=!1,l=0;if(e=e.replace(r.creditcard.nonDigits,""),e.length<13||e.length>19)return!1;for(a=e.length-1;a>=0;a-=1)t=e.charAt(a),l=parseInt(t,10),n&&(l*=2)>9&&(l-=9),i+=l,n=!n;return i%10===0}},colour:{separators:/[\,\-\_\|\:]/g,keywords:["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],regex:{hex:[/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i],hsl:[/^hsl\((\s*(-?\d+)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*)\)$/],hsla:[/^hsla\((\s*(-?\d+)\s*,)(\s*(\b(0?\d{1,2}|100)\b%)\s*,){2}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/],rgb:[/^rgb\((\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*,){2}(\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*)\)$/,/^rgb\((\s*(\b(0?\d{1,2}|100)\b%)\s*,){2}(\s*(\b(0?\d{1,2}|100)\b%)\s*)\)$/],rgba:[/^rgba\((\s*(\b([01]?\d{1,2}|2[0-4]\d|25[0-5])\b)\s*,){3}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/,/^rgba\((\s*(\b(0?\d{1,2}|100)\b%)\s*,){3}(\s*(0?(\.\d+)?|1(\.0+)?)\s*)\)$/]},validate:function(e,a){var i,n,l,d=r.colour.keywords,o=r.colour.regex;if("color"===t(this).attr("type"))return o.hex[0].test(e);if(a=a||["keywords","hex","hsl","hsla","rgb","rgba"],"string"==typeof a&&(a=a.replace(r.colour.separators," ").split(" ")),t.inArray("keywords",a)>-1&&t.inArray(e,d)>-1)return!0;for(n=0;n<a.length;n+=1)if(i=a[n],"object"==typeof o[i])for(l=0;l<o[i].length;l+=1)if(o[i][l].test(e))return!0;return!1}},addTest:function(e,t){return"string"!=typeof e||"function"!=typeof t?(a.error("validation.addTest(): A string and a function are required to add a validation test"),!1):(e=e.toLowerCase(),"undefined"==typeof r[e]&&(r[e]={validate:function(e,a){return t.call(this,e,a)}},r.setErrorClassString(),!0))},setRuleAliases:function(){var e,t,a=["required","alpha","alphanumeric","email","equalto","format","pattern","number","numeric","integer","digits","ip","ipaddress","checked","unchecked","date","url","creditcard","color","colour"],i=a.length;for(r.ip=r.ipaddress,r.color=r.colour,r.numeric=r.number,r.pattern=r.regexp=r.regex,r.equals=r.equalto=r.matches=r.match,e=0;e<i;e+=1)t=a[e],r["is"+t]=r[t]},setErrorClassString:function(){var a,i=[],n=["validation-failed"];for(a in r)r.hasOwnProperty(a)&&"object"==typeof r[a]&&t.isArray(r[a])===!1&&(i.push(a),n.push("validation-failed-"+a),n.push("validation-failed-not-"+a));e.validation&&(e.validation.rules=i),r.allRules=i,r.errorClassString=n.join(" ")}};return a={error:function(t){if(e.validation.debug)throw new Error(t)},getFormData:function(e,r){e=e||t('[data-validation="set"]'),r=r||"name","object"==typeof e&&e.length||(e=t(document));var i=e.add(e.find("input, select, textarea")).not('[type="submit"], [type="button"]'),n={};return i.each(function(){if(/input|select|textarea/i.test(this.nodeName)){var e,i,l,d=t(this),o=d.attr(r),s=n;if("undefined"!=typeof o){if(o.indexOf("[")>-1&&o.indexOf("]")>-1&&(o=o.split("[").join(".").split("]").join("")),o.indexOf(".")===-1)return void(n[o]=a.element.getValue(d,r));for(e=o.split("."),i=e.length-1,l=0;l<i;l+=1)"object"!=typeof s[e[l]]&&(s[e[l]]={}),s=s[e[l]];s[e[i]]=a.element.getValue(d,r)}}}),n},element:{isCheckable:function(e){return/radio|checkbox/i.test(e.attr("type"))},getByAttribute:function(e,a){a=a||"name";var r=t("["+a+'="'+e.attr(a)+'"]');return r.length?r:e},getValue:function(e,r){var i=[];return r=r||"name",a.element.isCheckable(e)&&(e=a.element.getByAttribute(e,"name").filter(":checked")),e.each(function(){var e=t(this).val();t.isArray(e)&&(e=e.join(",")),i.push(e)}),0===i.length&&i.push(-1),i.join(",")},setClasses:function(e,a){var i=e.removeClass(r.errorClassString).attr("name")||e.attr("id"),n=i?t('[data-validation-for="'+i+'"]'):void 0;a===!0?e.triggerHandler("validation.passed"):e.addClass("validation-failed validation-failed-"+(0===a.indexOf("!")?a.replace("!","not-"):a)).triggerHandler("validation.failed",a),n&&n.length&&(n.hide(),a!==!0&&n.filter('[data-validation="'+a+'"]').show())},getRules:function(e){var a=[],r={};return 1===e.length?e.data("validation"):(e.each(function(){var e,i,n=t(this).data("validation"),l=[];if("undefined"!=typeof n)for(l=n.split(" "),e=l.length,i=0;i<e;i+=1)"undefined"==typeof r[l[i]]&&(a.push(l[i]),r[l[i]]=!0)}),a.join(" ").replace(/!required|!isrequired/g,""))}},validate:{all:function(e){var r=t(this),i=r.find("input[data-validation], select[data-validation], textarea[data-validation]");return i.each(a.validate.element),i.filter(".validation-failed").length?(r.addClass("validation-failed").triggerHandler("validation.failed",a.getFormData(r)),!1):(r.removeClass("validation-failed").triggerHandler("validation.passed",a.getFormData(r)),!0)},rule:function(e,t,i,n){var l,d,o=!1;if(""!==i&&"!required"!==i&&"!isrequired"!==i){for(i.indexOf(":")>-1&&(l=i.split(":"),i=l.shift(),d=l.join(":").split("{!space}").join(" ")),i=i.toLowerCase().split("{!space}").join(" ");0===i.indexOf("!");)o=!o,i=i.replace("!","");if("object"!=typeof r[i])return a.error("Validation rule '"+i+"' does not exist.");if(n!==!1||"required"!==i&&"isrequired"!==i)return r[i].validate.call(e,t,d)===o?(o?"!":"")+i:void 0}},rules:function(e,t,r,i){var n,l=t.length,d=!0;for(n=0;n<l;n+=1)if(d=a.validate.rule(e,r,t[n],i),"string"==typeof d)return d;return!0},element:function(e){var i,n=t(this),l=a.element.getValue(n),d=a.element.isCheckable(n),o=!0;if(d&&(n=a.element.getByAttribute(n,"name")),i=a.element.getRules(n),""!==t.trim(i))return d&&(i=t.trim((" "+i+" ").replace(/ checked | ischecked /i," required "))),o=r.required.validate.call(n,l)?a.validate.rules(n,i.split(" "),l,!1):(" "+i.toLowerCase()+" ").indexOf(" required ")>-1?"required":!((" "+i.toLowerCase()+" ").indexOf(" isrequired ")>-1)||"isrequired",a.element.setClasses(n,o),o},handle:function(e,r,i){var n,l;if("undefined"!=typeof e&&null!==e||(a.error("validation.validate(): first arg should be a string (or array of strings) or element"),e=""),"object"!=typeof e||t.isArray(e)){if(r=r||"","string"==typeof r&&(r=r.split(" ")),t.isArray(e)){for(l=0;l<e.length;l+=1)if(a.validate.handle(e[l],r,!0)!==!0)return!1;return!0}return a.validate.rules({},r,e,i||!1)}return(n=t(e)).length||a.error("validation.validate(): element could not be found"),n.is("input, select, textarea")?0===n.each(a.validate.element).filter(".validation-failed").length:a.validate.all.call(n)}},prep:function(){var e=t(this).attr("data-validation","set");"FORM"===this.nodeName&&e.on("submit",function(t){return e.find('[data-validation="set"]').add(e).data("validation-submit-attempted",!0),a.validate.handle(this)}),e.on("click",".validation-trigger",function(e){var r=t(this).closest('[data-validation="set"]').data("validation-submit-attempted",!0);r.find('[data-validation="set"]').data("validation-submit-attempted",!0),a.validate.handle(r)}),e.on("change","input, select, textarea",function(r){var i=e.parent().closest('[data-validation="set"]').length||(a.element.isCheckable(t(this))?!a.element.getByAttribute(t(this),"name").filter("[data-validation]").length:"undefined"==typeof t(this).data("validation"));i||(t(this).closest('[data-validation="set"]').data("validation-submit-attempted")===!0?a.validate.handle(t(this).closest('[data-validation="set"]')):a.validate.handle(this))})},init:function(){t('[data-validation="true"]').each(a.prep)}},r.setRuleAliases(),r.setErrorClassString(),{init:a.init,debug:!1,addTest:r.addTest,getFormData:a.getFormData,rules:r.allRules,validate:function(e,t){return a.validate.handle(e,t,!0)}}});